(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{199:function(t,e,n){},200:function(t,e,n){},209:function(t,e,n){"use strict";n.r(e);var i=n(4),o=n(23),a=n(24),r=n(33),s=n(32),l=n(0),c=n.n(l),h=n(54),d=n.n(h),u=n(5),v=(n(198),n(199),n(25)),g=(n(200),function(){function t(e){Object(o.a)(this,t),this.EXIT="exit",this.DUNFORGET="save",this.REMEMBER="load",this.ADDTAG="addTag",this.VAR="var",this.ELSE="else",this.HASTAG="hasTag",this.UP="up",this.DELETETAG="deleteTag"}return Object(a.a)(t,[{key:"compile",value:function(t){this.code=t.split("\x01"),this.curLine=0,this.tags={},this.vars={},this.saves=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];for(var e=!1;this.curLine<this.code.length;++this.curLine){for(var n=0;n<this.code[this.curLine].length;++n)if("("===this.code[this.curLine][n]){e=!0;break}if(e)break}e?this.process(this.curLine):alert("You are missing the first left bracket! Code is incorrect.")}},{key:"executeAnOperation",value:function(t,e,n){var i=!1;switch(t){case this.VAR:var o=this.readFromPointToDot(this.code[n.line],e);e=o.charId,o=o.str;for(var a="",r=1;r<o.length-1;++r)a+=o[r];e=(o=this.readFromPointToDot(this.code[n.line],e)).charId,o=o.str;var s=this.readFromPointToDot(this.code[n.line],e);if(e=s.charId,s=parseInt(s.str),"="===o)this.vars[a]=s;else if("+="===o)this.vars[a]+=s;else{var l=!1;"=="===o?l=this.vars[a]===s:">="===o?l=this.vars[a]>=s:"!="===o?l=this.vars[a]!==s:"<="===o?l=this.vars[a]<=s:("<"===o||">"===o)&&(l=this.vars[a]<s),l?n.maxIndentationLevel++:n.seekingForElse=-2}break;case this.ADDTAG:var c=this.readFromPointToDot(this.code[n.line],e);e=c.charId,c=c.str,this.tags[c]=!0;break;case this.DELETETAG:var h=this.readFromPointToDot(this.code[n.line],e);e=h.charId,h=h.str,this.tags[h]=!1;break;case this.HASTAG:var d=this.readFromPointToDot(this.code[n.line],e);e=d.charId,(d=d.str)in this.tags&&!1!==this.tags[d]?n.maxIndentationLevel++:n.seekingForElse=-2;break;case this.ELSE:n.seekingForElse>-1&&(n.seekingForElse=-1,n.maxIndentationLevel++);break;case this.EXIT:this.options=[],this.text="--EXITED THE DIALOG--",i=!0;break;case this.REMEMBER:var u=this.readFromPointToDot(this.code[n.line],e).str;this.process(this.saves[parseInt(u)]),i=!0;break;case this.DUNFORGET:var v=this.readFromPointToDot(this.code[n.line],e);e=v.charId,v=parseInt(v.str);var g=this.readFromPointToDot(this.code[n.line],e);e=g.charId,g=parseInt(g.str),this.saves[g]=v+1+n.line;break;case this.UP:var m=this.readFromPointToDot(this.code[n.line],e);e=m.charId,m=parseInt(m.str);var y=n.line-1;for(n.indentationLevel=-1;n.indentationLevel!==m;){for(var f=0;f<this.code[y].length;++f)if(" "!==this.code[y][f]&&"\t"!==this.code[y][f]&&"\n"!==this.code[y][f])if("("===this.code[y][f])n.indentationLevel++;else{if(")"!==this.code[y][f])break;n.indentationLevel--}y--}this.process(y+1),i=!0}return{needsToExit:i,charId:e}}},{key:"process",value:function(t){this.text="",this.options=[];var e={};for(e.line=++t,e.indentationLevel=1,e.minIndentationLevel=1,e.maxIndentationLevel=1,e.seekingForElse=-1;0!==e.indentationLevel;){e.seekingForElse>-1&&e.seekingForElse--;for(var n=0;n<this.code[e.line].length;){if("("===this.code[e.line][n])e.indentationLevel++;else if(")"===this.code[e.line][n])1!==e.maxIndentationLevel&&!1===(e.indentationLevel<e.minIndentationLevel||e.indentationLevel>e.maxIndentationLevel)?e.maxIndentationLevel--:-2===e.seekingForElse&&!0===(e.indentationLevel<e.minIndentationLevel||e.indentationLevel>e.maxIndentationLevel)&&(e.seekingForElse=2),e.indentationLevel--;else{if(e.indentationLevel<e.minIndentationLevel||e.indentationLevel>e.maxIndentationLevel){++n;continue}if("\\"===this.code[e.line][n]){for(var i="",o=++n;o<this.code[e.line].length&&"/"!==this.code[e.line][o];++o)i+=this.code[e.line][o];this.options.push([i,e.line+1]);break}if(":"===this.code[e.line][n]){n++;var a=this.readFromPointToDot(this.code[e.line],n);if(n=a.charId,console.log(a),'"'===(a=a.str)[0]){for(var r="",s=1;s<a.length-1;++s)r+=a[s];this.text=r}else{var l=this.executeAnOperation(a,n,e);if(1==l.needsToExit)return l.charId;n=l.charId}break}}++n}++e.line}}},{key:"getText",value:function(){return this.text}},{key:"getOptions",value:function(){return this.options}},{key:"chooseOption",value:function(t){this.curLine=t[1],this.process(this.curLine)}},{key:"readFromPointToDot",value:function(t,e){for(var n="",i=!1;e<t.length;){if('"'===t[e]&&(i=!i),i){if("\\"===t[e]&&t.length-1!==e&&"n"===t[e+1]){e+=2,n+="<br>";continue}}else if("."===t[e])return{str:n,charId:e+1};n+=t[e],++e}return{str:n,charId:e+1}}}]),t}()),m=n(208).stateFromHTML,y=function(t){Object(r.a)(n,t);var e=Object(s.a)(n);function n(t){var i;return Object(o.a)(this,n),(i=e.call(this,t)).state={editorState:u.EditorState.createWithText(j)},i.focus=function(){return i.refs.editor.focus()},i.onChange=function(t){return i.setState({editorState:t})},i.handleKeyCommand=i._handleKeyCommand.bind(Object(v.a)(i)),i.mapKeyToEditorCommand=i._mapKeyToEditorCommand.bind(Object(v.a)(i)),i.toggleBlockType=i._toggleBlockType.bind(Object(v.a)(i)),i.toggleInlineStyle=i._toggleInlineStyle.bind(Object(v.a)(i)),i}return Object(a.a)(n,[{key:"getInitialState",value:function(){var t=m("<p>Hello</p>");return{editorState:u.EditorState.createWithContent(t)}}},{key:"setupDraggableBar",value:function(){var t=document.querySelector(".RichEditor-root"),e=!1,n=document.querySelector(".DIVIDER");n.addEventListener("mousedown",(function(t){e=!0}),!1),n.addEventListener("mouseup",(function(t){e=!1}),!1),document.addEventListener("mousemove",(function(n){e&&(t.style.width=(n.clientX-32).toString()+"px")}),!1)}},{key:"componentDidMount",value:function(){this.setupDraggableBar();var t=document.querySelector(".compiler"),e=this,n=new g,i=[],o=function t(){for(var e=0;e<i.length;++e)i[e].remove();i=[];var o=n.getOptions();if(void 0!==o){for(var a=document.getElementsByClassName("dialogSide")[0],r=function(e){var r=document.createElement("button");r.innerHTML=o[e][0];var s=o[e];r.addEventListener("click",(function(){n.chooseOption(s),t()})),i.push(r),a.appendChild(r)},s=0;s<o.length;++s)r(s);document.querySelector(".actualDialog").innerHTML=n.getText()}};t.addEventListener("click",(function(){n.compile(e.state.editorState.getCurrentContent().getPlainText("\x01")),o()}))}},{key:"_handleKeyCommand",value:function(t,e){var n=u.RichUtils.handleKeyCommand(e,t);return!!n&&(this.onChange(n),!0)}},{key:"_mapKeyToEditorCommand",value:function(t){if(9!==t.keyCode)return Object(u.getDefaultKeyBinding)(t);var e=u.RichUtils.onTab(t,this.state.editorState,4);e!==this.state.editorState&&this.onChange(e)}},{key:"_toggleBlockType",value:function(t){this.onChange(u.RichUtils.toggleBlockType(this.state.editorState,t))}},{key:"_toggleInlineStyle",value:function(t){this.onChange(u.RichUtils.toggleInlineStyle(this.state.editorState,t))}},{key:"render",value:function(){var t=this.state.editorState,e="RichEditor-editor",n=t.getCurrentContent();return n.hasText()||"unstyled"!==n.getBlockMap().first().getType()&&(e+=" RichEditor-hidePlaceholder"),Object(i.jsxs)("div",{className:"RichEditor-root",children:[Object(i.jsx)(k,{editorState:t,onToggle:this.toggleBlockType}),Object(i.jsx)(E,{editorState:t,onToggle:this.toggleInlineStyle}),Object(i.jsx)("div",{className:e,onClick:this.focus,children:Object(i.jsx)(u.Editor,{blockStyleFn:p,customStyleMap:f,editorState:t,handleKeyCommand:this.handleKeyCommand,keyBindingFn:this.mapKeyToEditorCommand,onChange:this.onChange,placeholder:"Tell a story...",ref:"editor",spellCheck:!0})})]})}}]),n}(c.a.Component),f={CODE:{backgroundColor:"rgba(0, 0, 0, 0.05)",fontFamily:'"Inconsolata", "Menlo", "Consolas", monospace',fontSize:16,padding:2}};function p(t){switch(t.getType()){case"blockquote":return"RichEditor-blockquote";default:return null}}var b=function(t){Object(r.a)(n,t);var e=Object(s.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).onToggle=function(e){e.preventDefault(),t.props.onToggle(t.props.style)},t}return Object(a.a)(n,[{key:"render",value:function(){var t="RichEditor-styleButton";return this.props.active&&(t+=" RichEditor-activeButton"),Object(i.jsx)("span",{className:t,onMouseDown:this.onToggle,children:this.props.label})}}]),n}(c.a.Component),T=[],k=function(t){var e=t.editorState,n=e.getSelection(),o=e.getCurrentContent().getBlockForKey(n.getStartKey()).getType();return Object(i.jsx)("div",{className:"RichEditor-controls",children:T.map((function(e){return Object(i.jsx)(b,{active:e.style===o,label:e.label,onToggle:t.onToggle,style:e.style},e.label)}))})},I=[],E=function(t){var e=t.editorState.getCurrentInlineStyle();return Object(i.jsx)("div",{className:"RichEditor-controls",children:I.map((function(n){return Object(i.jsx)(b,{active:e.has(n.style),label:n.label,onToggle:t.onToggle,style:n.style},n.label)}))})},j='\n\t//What you see now is an example dialog!\n\n(\n\n\t:"Good day, sir actor!"\n\t\\"Where am I?"/\n\t(\n\t\t:"I would say that you are in the theatre. You won\'t hear more from me."\n\t\t\\"..."/\n\t\t(\n\t\t\t:load.0\n\t\t)\n\t)\n\t\\"Who am I?"/\n\t(\n\t\t:"I already said that you, mister actor, are an actor. Why would you want to know more?"\n\t\t\\"..."/\n\t\t(\n\t\t\t:load.0\n\t\t)\n\t)\n\t\\"Who are you?"/\n\t(\n\t\t:"Wow, that\'s an interesting question... I\'m the owner of this theatre. My name will be a mystery for now."\n\t\t\\"..."/\n\t\t(\n\t\t\t:load.0\n\t\t)\n\t)\n\t\\"Where is the exit here?"/\n\t(\n\t\t:"There, first turn left."\n\t\t\\"Thanks, now I will go"/\n\t\t(\n\t\t\t:exit\n\t\t)\n\t\t\\"Alright, I\'ll remember that. You can continue now"/\n\t\t(\n\t\t\t:load.0\n\t\t)\n\t)\n\t:save.1.0\n\t\\"..."/\n\t(\n\t\t:"Who do you want to play? I see real talent in you."\n\t\t:var."jobs".=.0\n\t\t:hasTag."nonAustro"\n\t\t(\n\t\t\t:var."jobs".+=.1\n\t\t)\n\t\t:else\n\t\t(\n\t\t\\"I wouldn\'t mind being an astronaut"/\n\t\t(\n\t\t\t:"I\'m sorry but that role is already taken."\n\t\t\t\\"..."/\n\t\t\t(\n\t\t\t\t:addTag."nonAustro"\n\t\t\t\t:up.3\n\t\t\t)\n\t\t)\n\t\t)\n\t\t\n\t\t:hasTag."nonDragon"\n\t\t(\n\t\t\t:var."jobs".+=.1\n\t\t)\n\t\t:else\n\t\t(\n\t\t\\"Fantasy dragon please!"/\n\t\t(\n\t\t\t:"I\'m sorry but that role is already taken."\n\t\t\t\\"..."/\n\t\t\t(\n\t\t\t\t:addTag."nonDragon"\n\t\t\t\t:up.3\n\t\t\t)\n\t\t)\n\t\t)\n\t\t:hasTag."nonDetective"\n\t\t(\n\t\t\t:var."jobs".+=.1\n\t\t)\n\t\t:else\n\t\t(\n\t\t\\"I would like to play detective!"/\n\t\t(\n\t\t\t:"I\'m sorry but that role is already taken."\n\t\t\t\\"..."/\n\t\t\t(\n\t\t\t\t:addTag."nonDetective"\n\t\t\t\t:up.3\n\t\t\t)\n\t\t)\n\t\t)\n\t\t:var."jobs".==.3\n\t\t(\n\t\t\t\\"WHO CAN I EVEN PLAY!?"/\n\t\t\t(\n\t\t\t\t:"Hmmm... Let me check..."\n\t\t\t\t\t\\"..."/\n\t\t\t\t\t(\n\t\t\t\t\t\t:"Yes, I\'m very sorry... Apparently, only one role is vacant..."\n\t\t\t\t\t\t\\"Which one???"/\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t:load.0\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\\"Tell me!"/\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t:load.0\n\t\t\t\t\t\t)\n\t\t\t\t\t\t:save.1.0\n\t\t\t\t\t\t\\"Speak!!!"/\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t:"Yes... A simple man."\n\t\t\t\t\t\t\t\t\\"Huh?"/\n\t\t\t\t\t\t\t\t(\n\t\t\t//The game start here...\n\n:"You wake up in your bed and stare into the rotten ceiling."\n\\I want to sleep just a little bit more.../\n(\n\t:"Unfortunately, you still have to wake up."\n\t\\What a shame.../\n\t(\n\t\t:up.2\n\t)\n)\n\\"What time is it?"/\n(\n\t:" - you ask... You can\'t really hear an answer though."\n\t\\I will tell them.../\n\t(\n\t\t:up.2\n\t)\n)\n\\Time to rise from the bed.../\n(\n\t:exit\n)\n\t\t\t//The game ends here...\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t)\n\t\t)\n\t)\n)',L=y;var x=function(){return Object(l.useEffect)((function(){document.title="Dialog Editor"}),[]),Object(i.jsx)("div",{className:"App",style:{height:"100%"},children:Object(i.jsxs)("div",{style:{height:"100%"},children:[Object(i.jsxs)("div",{className:"flexer",children:[Object(i.jsx)(L,{}),Object(i.jsx)("div",{className:"DIVIDER"}),Object(i.jsx)("div",{className:"dialogSide",children:Object(i.jsx)("div",{className:"actualDialog",children:"Dialog will be visible here!"})})]}),Object(i.jsx)("button",{className:"compiler",children:" Compile!"})]})})},O=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,211)).then((function(e){var n=e.getCLS,i=e.getFID,o=e.getFCP,a=e.getLCP,r=e.getTTFB;n(t),i(t),o(t),a(t),r(t)}))},C=n(96),D=n.n(C);c.a.Component;d.a.render(Object(i.jsx)(D.a,{basename:"/dialogEditor",children:Object(i.jsx)(x,{})}),document.getElementById("root")),O()}},[[209,1,2]]]);
//# sourceMappingURL=main.6184330c.chunk.js.map